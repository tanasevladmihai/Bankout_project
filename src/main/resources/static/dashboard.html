<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bankout Dashboard</title>
    <link rel="stylesheet" href="css/dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<div class="navbar">
    <div class="menu-icon">‚ò∞</div>
    <div class="user-icon" onclick="toggleUserMenu()">üë§</div>

    <!-- Add User Dropdown -->
    <div id="userDropdown" class="user-dropdown">
        <div class="user-dropdown-item" onclick="logout()">Log Out</div>
        <div class="user-dropdown-item danger" onclick="initiateDeleteAccount()">Delete Account</div>
    </div>
</div>

<div class="dashboard-wrapper">
    <div class="carousel" id="mainCarousel">

        <div class="slide slide-1">
            <div class="bankout-logo">Bank<span>out</span></div>
            <div class="slogan">Save Money like a Pro</div>

            <div class="accounts-card">
                <div class="card-header" onclick="toggleAccountMenu()">
                    Accounts <span class="arrow">ÔπÄ</span>
                </div>
                <div id="accDropdown" class="dropdown-menu">
                    <div onclick="createNewAccount()">+ Create New</div>
                </div>

                <div id="accountsList" class="accounts-list">
                </div>
            </div>
        </div>

        <div class="slide slide-2">
            <div class="bankout-logo">Bank<span>out</span></div>
            <div class="slogan">Save Money like a Pro</div>

            <div class="report-card">
                <div class="card-header">
                    Spending Report <span class="blue-text" id="periodText" onclick="togglePeriodMenu()">monthly ÔπÄ</span>
                </div>
                <div id="periodDropdown" class="dropdown-menu" style="left: 200px;">
                    <div onclick="loadGraph('DAILY')">Daily</div>
                    <div onclick="loadGraph('WEEKLY')">Weekly</div>
                    <div onclick="loadGraph('MONTHLY')">Monthly</div>
                </div>
                <div class="chart-box">
                    <canvas id="spendingChart"></canvas>
                </div>
                <!-- Budget Message -->
                <div id="budgetMessage" style="margin-top: 15px; padding: 10px; border-radius: 5px; text-align: center; font-weight: bold; display: none;"></div>
                <!-- Budget Button -->
                <button class="budget-btn" onclick="openBudgetModal()">üí∞ Set Budget</button>
            </div>
        </div>

        <div class="slide slide-3">
            <div class="bankout-logo">Bank<span>out</span></div>
            <div class="slogan">Save Money like a Pro</div>

            <div class="stores-container" id="storesList">
            </div>
        </div>

    </div>

    <div class="dots-container">
        <span class="dot active" onclick="goToSlide(0)"></span>
        <span class="dot" onclick="goToSlide(1)"></span>
        <span class="dot" onclick="goToSlide(2)"></span>
    </div>
</div>

<div id="actionModal" class="modal hidden">
    <div class="modal-content">
        <h3>Actions</h3>
        <button class="btn-orange" onclick="showWireIn()">Wire In</button>
        <button class="btn-orange" onclick="showSendFunds()">Send Funds</button>
        <button class="btn-cancel" style="background-color: #d9534f; color: white; margin-top:10px;" onclick="confirmDelete()">
            Delete Account
        </button>
        <button class="btn-cancel" onclick="closeModal()">Cancel</button>
    </div>
</div>

<div id="wireInModal" class="modal hidden">
    <div class="modal-content">
        <h3>Wire In Money</h3>
        <input type="number" id="wireAmount" placeholder="Amount">
        <button class="btn-blue" onclick="submitWireIn()">Confirm</button>
        <button class="btn-cancel" onclick="closeModal()">Cancel</button>
    </div>
</div>
<div id="sendFundsModal" class="modal hidden">
    <div class="modal-content">
        <h3>Send Money</h3>
        <input type="text" id="recipientName" placeholder="Recipient Name" style="width: 100%; padding: 10px; margin-bottom: 10px;">
        <input type="text" id="recipientIban" placeholder="Recipient IBAN" style="width: 100%; padding: 10px; margin-bottom: 10px;">
        <input type="number" id="sendAmount" placeholder="Amount (‚Ç¨)" style="width: 100%; padding: 10px; margin-bottom: 10px;">

        <button class="btn-orange" onclick="submitSendFunds()">Send</button>
        <button class="btn-cancel" onclick="closeModal()">Cancel</button>
    </div>
</div>
<div id="createAccountModal" class="modal hidden">
    <div class="modal-content">
        <h3>Open New Account</h3>
        <input type="text" id="newAccountName" placeholder="Account Title (e.g. Savings)" style="width: 100%; padding: 10px; margin-bottom: 10px;">
        <input type="text" id="newAccountNumber" placeholder="Account Number (IBAN)" style="width: 100%; padding: 10px; margin-bottom: 10px;">

        <button class="btn-blue" onclick="submitCreateAccount()">Create Account</button>
        <button class="btn-cancel" onclick="closeModal()">Cancel</button>
    </div>
</div>

<div id="deleteLoginModal" class="modal hidden">
    <div class="modal-content">
        <h3>Delete Account - Verify Identity</h3>
        <p style="color: #d9534f; margin-bottom: 15px;">‚ö†Ô∏è This action cannot be undone!</p>

        <div style="text-align: left; margin-top: 15px;">
            <label style="font-weight: bold; display: block; margin-bottom: 5px;">Email</label>
            <input type="email" id="deleteEmail" placeholder="Your email" style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 3px;">
        </div>

        <div style="text-align: left; margin-top: 15px;">
            <label style="font-weight: bold; display: block; margin-bottom: 5px;">Password</label>
            <input type="password" id="deletePassword" placeholder="Your password" style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 3px;">
        </div>

        <p id="deleteLoginError" style="color: red; margin-top: 10px; display: none;"></p>

        <button class="btn-orange" onclick="submitDeleteLogin()" style="margin-top: 15px;">Verify & Send 2FA</button>
        <button class="btn-cancel" onclick="closeModal()">Cancel</button>
    </div>
</div>
<div id="delete2FAModal" class="modal hidden">
    <div class="modal-content">
        <h3>Delete Account - 2FA Verification</h3>
        <p style="margin-bottom: 15px;">Enter the code sent to your phone</p>

        <div style="text-align: left; margin-top: 15px;">
            <label style="font-weight: bold; display: block; margin-bottom: 5px;">2FA Code</label>
            <input type="text" id="delete2FACode" placeholder="Enter 4-digit code" maxlength="4" style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 3px;">
        </div>

        <p id="delete2FAError" style="color: red; margin-top: 10px; display: none;"></p>

        <button class="btn-orange" onclick="confirmAccountDeletion()" style="margin-top: 15px; background: #d9534f;">Permanently Delete Account</button>
        <button class="btn-cancel" onclick="closeModal()">Cancel</button>
    </div>
</div>

<!-- Budget Modal -->
<div id="budgetModal" class="modal hidden">
    <div class="modal-content">
        <h3>Set Budget</h3>
        <p style="margin-bottom: 15px;">Set your spending limit for the current period</p>

        <div style="text-align: left; margin-top: 15px;">
            <label style="font-weight: bold; display: block; margin-bottom: 5px;">Period</label>
            <select id="budgetPeriod" style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 3px;">
                <option value="DAILY">Daily</option>
                <option value="WEEKLY">Weekly</option>
                <option value="MONTHLY" selected>Monthly</option>
            </select>
        </div>

        <div style="text-align: left; margin-top: 15px;">
            <label style="font-weight: bold; display: block; margin-bottom: 5px;">Budget Amount (‚Ç¨)</label>
            <input type="number" id="budgetAmount" placeholder="Enter amount" step="0.01" min="0" style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 3px;">
        </div>

        <p id="budgetError" style="color: red; margin-top: 10px; display: none;"></p>

        <button class="btn-orange" onclick="submitBudget()" style="margin-top: 15px;">Save Budget</button>
        <button class="btn-cancel" onclick="closeModal()">Cancel</button>
    </div>
</div>

<script src="JS/dashboard.js"></script>
</body>
</html>